// -- Sammy.js -- /plugins/sammy.form_2_json.js
// http://sammyjs.org
// Version: 0.7.1
// Built: 2012-01-21 16:40:19 -0800
(function(a){Sammy=Sammy||{};(function(){window.form2object=function(l,h,e){if(typeof e=="undefined"||e==null){e=true}if(typeof h=="undefined"||h==null){h="."}l=typeof l=="string"?document.getElementById(l):l;var q=c(l);var v={};var k={};for(var p=0;p<q.length;p++){var r=q[p].value;if(e&&r===""){continue}var g=q[p].name;var o=g.split(h);var s=v;var m="";for(var n=0;n<o.length;n++){var t=o[n];var f="";if(t.indexOf("[]")>-1&&n==o.length-1){m=f=t.substr(0,t.indexOf("["));if(!s[f]){s[f]=[]}s[f].push(r)}else{if(t.indexOf("[")>-1){f=t.substr(0,t.indexOf("["));var u=t.replace(/^[a-z]+\[|\]$/gi,"");m=m+f+u;if(!k[m]){k[m]={}}if(!s[f]){s[f]=[]}if(n==o.length-1){s[f].push(r)}else{if(!k[m][u]){s[f].push({});k[m][u]=s[f][s[f].length-1]}}s=k[m][u]}else{if(n<o.length-1){if(!s[t]){s[t]={}}s=s[t]}else{s[t]=r}}}}}return v};function c(g){var e=[];var h=g.firstChild;while(h){if(h.nodeName.match(/INPUT|SELECT|TEXTAREA/i)){var i=b(h);if(i!==null){e.push({name:h.name,value:i})}}else{var f=c(h);e=e.concat(f)}h=h.nextSibling}return e}function b(e){switch(e.nodeName){case"INPUT":case"TEXTAREA":switch(e.type.toLowerCase()){case"radio":case"checkbox":if(e.checked){return e.value}break;case"button":case"reset":case"submit":case"image":return"";break;default:return e.value;break}break;case"SELECT":return d(e);break;default:break}return null}function d(j){var f=j.multiple;if(!f){return j.value}var e=[];for(var h=j.getElementsByTagName("option"),k=0,g=h.length;k<g;k++){if(h[k].selected){e.push(h[k].value)}}return e}window.form2json=window.form2object})();Sammy.Form2JSON=function(b){b._parseFormParams=function(c){return form2object(c[0])}}})(jQuery);
